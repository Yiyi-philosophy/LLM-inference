
## Result on A6000 45G

## Flexgen
### Different Batches

| latency    | num batch | Origin  | diagonal |       |
|------------|-----------|---------|----------|-------|
|            | 4         | 2.649   | 2.067    |       |
|            | 8         | 5.228   | 3.627    |       |
|            | 16        | 10.434  | 6.829    |       |
|            | 32        | 21.208  | 13.143   |       |
|            |           |         |          |       |
| throughput |           | Origin  | diagonal | scale |
|            | 4         | 386.495 | 495.461  | 1.282 |
|            | 8         | 391.701 | 564.598  | 1.441 |
|            | 16        | 392.55  | 599.786  | 1.528 |
|            | 32        | 386.268 | 623.286  | 1.614 |
|            |           |         |          |       |
| peak mem   |           | Origin  | diagonal |       |
|            | 4         | 6.278   | 6.086    |       |
|            | 8         | 9.522   | 9.172    |       |
|            | 16        | 16.011  | 15.335   |       |
|            | 32        | 28.987  | 27.749   |       |

### Different Prompt length
| Num   batches | Prompt | Origin  | Origin     | Origin   | Diag    | Diag       | Diag     |
|---------------|--------|---------|------------|----------|---------|------------|----------|
|               |        | latency | throughput | peak mem | latency | throughput | peak mem |
| 4             | 128    | 2.158   | 474.599    | 3.699    | 1.246   | 822.02     | 3.525    |
| 4             | 256    | 2.32    | 441.424    | 4.555    | 1.515   | 675.8      | 4.378    |
| 4             | 512    | 2.626   | 389.879    | 6.278    | 2.069   | 494.897    | 6.086    |
| 4             | 1024   | 3.524   | 290.593    | 10.153   | 3.555   | 288.077    | 9.93     |
| 8             | 128    | 4.321   | 473.985    | 4.652    | 2.295   | 892.348    | 4.315    |
| 8             | 256    | 4.647   | 440.707    | 6.268    | 2.724   | 751.873    | 5.933    |
| 8             | 512    | 5.324   | 384.683    | 9.522    | 3.615   | 566.58     | 9.172    |
| 8             | 1024   | 7.092   | 288.789    | 16.46    | 6.025   | 339.892    | 16.078   |
| 16            | 128    | 8.692   | 471.235    | 6.559    | 4.585   | 893.311    | 5.884    |
| 16            | 256    | 9.39    | 436.231    | 9.694    | 5.386   | 760.542    | 9.034    |
| 16            | 512    | 10.633  | 385.228    | 16.011   | 6.881   | 595.28     | 15.335   |
| 16            | 1024   | 14.248  | 287.482    | 29.073   | 11.101  | 368.981    | 28.366   |
| 32            | 128    | 17.382  | 471.291    | 10.371   | 8.812   | 929.688    | 9.11     |
| 32            | 256    | 18.79   | 435.974    | 16.546   | 10.311  | 794.502    | 15.323   |
| 32            | 512    | 21.467  | 381.616    | 28.987   | 13.253  | 618.147    | 27.749   |
| 32            | 1024   | -       | -          | -        | -       | -          | -        |

#### Compare Scale

##### throughput

| Num batches \Prompt | 128   | 256   | 512   | 1024  |
|---------------------|-------|-------|-------|-------|
| 4                   | 1.732 | 1.531 | 1.269 | 0.991 |
| 8                   | 1.883 | 1.706 | 1.473 | 1.177 |
| 16                  | 1.896 | 1.743 | 1.545 | 1.283 |
| 32                  | **1.973** | 1.822 | 1.620 | -     |

##### peak mem

| Num batches \Prompt | 128       | 256   | 512   | 1024  |
|---------------------|-----------|-------|-------|-------|
| 4                   | 0.953     | 0.961 | 0.969 | 0.978 |
| 8                   | 0.928     | 0.947 | 0.963 | 0.977 |
| 16                  | 0.897     | 0.932 | 0.958 | 0.976 |
| 32                  | **0.878** | 0.926 | 0.957 | -     |
